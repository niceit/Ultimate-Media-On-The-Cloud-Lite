/*! Ultimate Media On The Cloud | (c) PhpRockets Team | Settings Page */
jQuery(function(){var e=jQuery(".ucm-settings-body .tabs").find("li.is-active a").data("target");jQuery("#"+e).show(),jQuery("a.ucm-settings-nav").click(function(){jQuery(".ucm-settings-body").find(".tabs").find("li").removeClass("is-active"),jQuery(this).parent("li").addClass("is-active");var e=jQuery(this).data("target");jQuery(".ucm-settings-body").find(".panel-body").hide(),jQuery(".ucm-settings-body").find(".panel-body#"+e).show()}),jQuery("#btn-ucm-general").click(function(e){e.preventDefault(),phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_general.saveSettings,type:"POST",dataType:"json",data:jQuery("#frm-ucm-general").serialize(),timeout:36e4,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",t)}})}),jQuery("#btn-ucm-advanced").click(function(e){e.preventDefault(),phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_general.saveSettingsAdvanced,type:"POST",dataType:"json",data:jQuery("#frm-ucm-advanced").serialize(),timeout:36e3,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",t)}})}),jQuery(".ucm-accounts-tab-links a").click(function(e){e.preventDefault(),jQuery(".ucm-accounts-tab-links a").removeClass("is-active"),jQuery(this).addClass("is-active");var a=jQuery("#"+jQuery(this).data("id"));jQuery(".account-panel-body").removeClass("is-active"),a.addClass("is-active")}),jQuery("#btn-amz-setting").click(function(e){e.preventDefault();var a=jQuery("#app-key").val(),t=jQuery("#app-secret").val(),s=jQuery("#app-region").val(),o=jQuery("#app-bucket").val(),r=jQuery("#cloud-path").val(),p=jQuery("#storage-class").val();""!==a&&""!==t&&""!==s&&""!==o&&""!==r&&""!==p?(phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm.saveSettings,type:"POST",dataType:"json",data:jQuery("#frm-ucm-amazon-s3").serialize(),timeout:36e3,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",t)}})):phpR_UCM.toast.show("error",phpR_UCM.l10n._e("aws","_require_all_fields"))}),jQuery("#btn-amz-connect").click(function(e){e.preventDefault();var a=jQuery("#app-key").val(),t=jQuery("#app-secret").val(),s=jQuery("#app-region").val();""!==a&&""!==t&&""!==s?(phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm.connectAws,type:"POST",dataType:"json",data:jQuery("#frm-ucm-amazon-s3").serialize(),timeout:36e3,success:function(e){e.success?(jQuery("#app-bucket").html(e.data.html),phpR_UCM.toast.show("success",e.data.message)):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",t)}})):phpR_UCM.toast.show("error",phpR_UCM.l10n._e("aws","_missing_key"))}),jQuery("#key-file").on("change",function(e){phprockets_ucm_gcloud.keyFile=jQuery(this)[0].files[0],jQuery("#frm-ucm-google-cloud").find("span.file-label").html(phprockets_ucm_gcloud.keyFile.name)}),jQuery("#btn-gcloud-connect").click(function(e){e.preventDefault();var a=jQuery("#project-id").val(),t=jQuery("#key-file").val(),s=jQuery("#is-gcloud-account").val();if(""!==a)if(s||""!==t){var o=new FormData(jQuery("#frm-ucm-google-cloud")[0]);phpR_UCM.toast.hide(),o.append("project_id",a),o.append("file",jQuery("#key-file")[0].files[0]),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm_gcloud.connect,type:"POST",dataType:"json",data:o,cache:!1,contentType:!1,processData:!1,timeout:36e3,success:function(e){e.success?(jQuery("#gcloud-bucket").html(e.data.html),phpR_UCM.toast.show("success",e.data.message)):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_save_settings_failed"))}})}else phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_missing_auth_file"));else phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_missing_project_id"))}),jQuery("#btn-google-cloud-setting").click(function(e){e.preventDefault();var a=jQuery("#project-id").val(),t=jQuery("#key-file").val(),s=jQuery("#gcloud-bucket").val(),o=jQuery("#is-gcloud-account").val();if(""!==a)if(o||""!==t)if(""!==s){var r=new FormData(jQuery("#frm-ucm-google-cloud")[0]);phpR_UCM.toast.hide(),r.append("project_id",a),r.append("file",jQuery("#key-file")[0].files[0]),r.append("bucket",s),r.append("cloud_path",jQuery("#gcloud-cloud-path").val()),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm_gcloud.saveSettings,type:"POST",dataType:"json",data:r,cache:!1,contentType:!1,processData:!1,timeout:36e3,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error","Unable to Save Settings with this Auth Key file.")}})}else phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_choose_bucket"));else phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_missing_auth_file"));else phpR_UCM.toast.show("error",phpR_UCM.l10n._e("gcloud","_missing_project_id"))}),jQuery("#btn-ucm-feedback").click(function(e){e.preventDefault();var a=!0;if(jQuery("#frm-ucm-feedback input, #frm-ucm-feedback select, #frm-ucm-feedback textarea").each(function(){if(""===jQuery(this).val())return phpR_UCM.toast.show("error",phpR_UCM.l10n._e("settings","_require_all_fields")),a=!1}),!a)return!1;var t=jQuery("#frm-ucm-feedback").serialize();phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_general.sendFeedback,type:"POST",dataType:"json",data:t,timeout:36e3,success:function(e){e.success?(document.frm_ucm_feedback.reset(),phpR_UCM.toast.show("success",e.data.message)):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,a,t){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",phpR_UCM.l10n._e("settings","_error_submit"))}})})});